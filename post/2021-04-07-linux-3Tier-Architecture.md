## 3계층 구조 (3-Tier-Architecture)

- 3계층 구조란 어떤 플랫폼을 3계층으로 나누어 별도의 논리적/물리적인 장치에 구축 운영하는 형태를 말한다. 

- 일반적인 3계층 구조는 아래와 같이 (1) 프레젠테이션 계층, (2) 어플리케이션 계층, (3) 데이터 계층을 모두 물리적으로 구분하여 구성한 것이다. 

<img width="1003" alt="image" src="https://user-images.githubusercontent.com/77392444/114677362-31476980-9d45-11eb-8ff9-e2258b2158a7.png">

- 이때 Web Server는 프레젠테이션 계층에, WAS는 어플리케이션 계층에 위치하게 된다. 

## 기업 환경에서의 3계층 구조

- WebServer와 Was 관점에서 3계층 구조를 살펴보면, WAS는 여러대를 구성하고 있을 수 있다. 

  - Domain Administrator Server(DAS) : 도메인 전체의 설정, 도메인 전체의 application을 관리

  - Managed Server(MS):도메인 : 업무가 서비스 되는 서버.

<img width="921" alt="image" src="https://user-images.githubusercontent.com/77392444/114680793-7f11a100-9d48-11eb-902c-46e513b0a13a.png">


## 클러스터

클러스터는 도메인 내에서 같은 서비스를 수행하는 MS들로 구성된다. 보통 여러 머신에 분산되어 있다. 이렇게 구성된 클러스터는 다음과 같은 기능을 갖는다.

- 부하 분산(Load Balancing)
  - 과부하로 인한 서비스 중단을 방지하고 응답 속도를 향상하기 위해 여러 서버 간에 수행해야 할 서비스를 분배하는 기능이다.
  - 동일한 서비스를 수행할 수 있는 환경을 구성해야 하고, 서로의 위치와 상태를 알고 있어야 한다.

- 장애 극복(Failover)
   - 하나의 서버가 비정상 종료된 경우에 그 서버가 수행하고 있던 서비스를 다른 서버가 대신 수행하는 것을 의미한다.
  - 비정상 종료한 서버 대신 서비스를 수행하는 서버는 비정상 종료된 서버와 같은 서비스를 수행할 수 있어야 하고, 비정상 종료된 서버를 감지할 수 있어야 한다. 또한, 비정상 종료된 서버의 서비스 진행 상태를 알아야 한다.

<img width="868" alt="image" src="https://user-images.githubusercontent.com/77392444/114680913-9d779c80-9d48-11eb-9c3f-47efe27459a5.png">


## 3계층 구조의 장점

- 효율성 : 현업에선 각 계층을 담당하는 팀들을 구성하여 업무 분담이 가능해지므로 업무 효율성이 증가한다. 

- 리스크완화 : 서로 다른 물리적/논리적 서버를 구성하기 때문에 상호 리스크를 완화할 수 있다. 

- 서버 부하 감소 : 여러 대의 서버로 나누어서 각 계층이 동작하기 때문에 서버의 부하를 줄일 수 있다. 

- 합리적 서버 운영 : 경우에 따라서 부하가 발생하는 특정 계층의 서버에서만 합리적인 스케일업(성능 업그레이드)를 할 수 있기 때문에 합리적이다.


## 3계층 구조의 단점

- 1계층처럼 하나의 물리적 서버만 사용하는 것이 아니라 여러 물리적 서버에 분산되어 있기 때문에 관리 포인트가 늘고, 장애 포인트 또한 늘어난다는 단점이 있다. 

- 또 여러 개의 물리적 서버 환경을 구축하기 위해서 비용이 많이 발생하게 되는 단점이 있다. 
